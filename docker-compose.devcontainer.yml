services:
  devcontainer:
    build:
      context: .
      target: development
      args:
        CREATE_VSCODE_USER: true
    user: vscode
    env_file:
      - path: .env
        required: false
    volumes:
      - .:/workspace:cached
      - /var/run/docker.sock:/var/run/docker.sock
      # Mount Claude Desktop MCP server log file (read-only)
      - /mnt/c/Users/nickw/AppData/Roaming/Claude/logs:/workspace/logs:ro
      # Mount Claude Code config for authentication
      - /mnt/c/Users/nickw/.claude:/home/vscode/.claude
    ports:
      - "8000:8000"
    stdin_open: true
    tty: true
    command: sleep infinity
